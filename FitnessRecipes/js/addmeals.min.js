(function(){$(document).ready(function(){$("#tbSearchField").focus();var r=$("#btnSearch"),t=$("#addedMeals"),i=$("#addedIngredients"),n=$("#hiDietId").val();$("#ingredientCategories").load("/meal/GetIngredientCategories",function(){$(".categoryIngredient").bind("click",function(){$("#searchResult").load("/ingredient/Categories?id="+$(this).data("categoryid"),function(){loadResult(".ingredientPopup",function(){showModal("#addModal","#hiIngredientId",$(this).data("ingredientid"))}),$(".superIngredient").click(function(){$(this).parent().siblings(".subIngredient").toggle(),$("#hiIngredientId").val($(this).data("ingredientid"))})})})}),$("#mealCategories").load("/meal/GetMealCategories",function(){$(".categoryMeal").bind("click",function(){$("#searchResultMeals").load("/meal/Categories?id="+$(this).data("mealcategoryid"),function(){loadResult(".mealPopup",function(){showModal("#addMealModal","#hiMealId",$(this).data("mealid"))})})})}),i.load("/diet/GetIngredientsForDiet?id="+n,function(){$(".removeIngredient").bind("click",function(){$.post("/diet/RemoveIngredientFromDiet?dietId="+n+"&ingredientId="+$(this).data("ingredientid"),function(){i.load("/diet/GetIngredientsForDiet?id="+n)})})}),$("#btnIngredientAdd").click(function(){$.post("/diet/AddIngredientToDiet?dietId="+n+"&ingredientId="+$("#hiIngredientId").val()+"&quantity="+$("#tbQuantity").val()+"&quantityId="+$("#ddlQuantityType").val()+"&day="+toIntArray(["#cbMonday","#cbTuesday","#cbWednesday","#cbThursday","#cbFriday","#cbSaturday","#cbSunday"])+"&time="+$("#ddlTime").val(),function(){$("#addModal").trigger("reveal:close"),i.load("/diet/GetIngredientsForDiet?id="+n,function(){$(".removeIngredient").bind("click",function(){$.post("/diet/RemoveIngredientFromDiet?dietId="+n+"&ingredientId="+$(this).data("ingredientid"),function(){i.load("/diet/GetIngredientsForDiet?id="+n)})})})})}),t.load("/diet/GetMealsForDiet?id="+n,function(){$(".removeMeal").bind("click",function(){$.post("/diet/RemoveMealFromDiet?dietId="+n+"&mealId="+$(this).data("mealid"),function(){t.load("/diet/GetMealsForDiet?id="+n)})})}),$("#btnMealAdd").click(function(){$.post("/diet/AddMealToDiet?dietId="+n+"&mealId="+$("#hiMealId").val()+"&day="+toIntArray(["#cbMealMonday","#cbMealTuesday","#cbMealWednesday","#cbMealThursday","#cbMealFriday","#cbMealSaturday","#cbMealSunday"])+"&time="+$("#ddlMealTime").val(),function(){$("#addMealModal").trigger("reveal:close"),t.load("/diet/GetMealsForDiet?id="+n,function(){$(".removeMeal").bind("click",function(){$.post("/diet/RemoveMealFromDiet?dietId="+n+"&mealId="+$(this).data("mealid"),function(){t.load("/diet/GetMealsForDiet?id="+n)})})})})}),r.bind("click",function(){$("#searchResult").load("/ingredient/SearchResult?searchString="+$("#tbSearchField").val(),function(){loadResult(".ingredientPopup",function(){showModal("#addModal","#hiIngredientId",$(this).data("ingredientid"))}),$(".superIngredient").click(function(){$(this).parent().siblings(".subIngredient").toggle(),$("#hiIngredientId").val($(this).data("ingredientid"))})}),$("#searchResultMeals").load("/meal/SearchResultForDiet?searchString="+$("#tbSearchField").val(),function(){loadResult(".mealPopup",function(){showModal("#addMealModal","#hiMealId",$(this).data("mealid"))})})})})}).call(this)